<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for package in packages %}
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow"
         x-data="{ open: false }">
        <div class="flex justify-between items-start mb-4">
            <div class="flex-1">
                <h3 class="text-lg font-semibold text-gray-900">{{ package.name }}</h3>
                {% if not package.is_active %}
                <span class="inline-block mt-1 px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full">Inactive</span>
                {% endif %}
            </div>
            <button @click="open = !open"
                    class="p-1 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 rounded">
                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
                </svg>
            </button>
        </div>
        
        {% if package.description %}
        <p class="text-sm text-gray-600 mb-4">{{ package.description|truncatewords:20 }}</p>
        {% endif %}
        
        <div class="space-y-2 mb-4">
            <div class="flex justify-between text-sm">
                <span class="text-gray-500">Sessions:</span>
                <span class="font-medium text-gray-900">{{ package.sessions_count }}</span>
            </div>
            <div class="flex justify-between text-sm">
                <span class="text-gray-500">Price:</span>
                <span class="font-bold text-indigo-600">${{ package.price|floatformat:2 }}</span>
            </div>
        </div>
        
        <!-- Actions Dropdown -->
        <div x-show="open"
             @click.away="open = false"
             x-transition:enter="transition ease-out duration-100"
             x-transition:enter-start="opacity-0 scale-95"
             x-transition:enter-end="opacity-100 scale-100"
             class="flex gap-2 pt-4 border-t border-gray-200"
             style="display: none;">
            <button hx-get="{% url 'frontend:packages_edit_form' package.id %}"
                    hx-target="#modal-content"
                    @click="window.dispatchEvent(new CustomEvent('open-modal'))"
                    class="flex-1 px-3 py-1.5 text-sm bg-indigo-100 text-indigo-700 rounded hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                Edit
            </button>
        </div>
    </div>
    {% empty %}
    <div class="col-span-full text-center py-12 bg-white rounded-lg border border-gray-200">
        <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
        </svg>
        <h3 class="mt-2 text-sm font-medium text-gray-900">No packages</h3>
        <p class="mt-1 text-sm text-gray-500">Create your first package to get started.</p>
    </div>
    {% endfor %}
</div>

